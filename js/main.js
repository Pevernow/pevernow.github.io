// build time:Mon Feb 24 2020 14:01:29 GMT+0800 (GMT+08:00)
"use strict";(function(){var t={};var e=t.util={};var i=Array.prototype.concat;var n=Array.prototype.slice;e.bind=function d(t,e){var s=n.call(arguments,2);return function(){t.apply(e,i.call(s,n.call(arguments)))}};e.extend=function g(t,e){for(var i in e){if(e.hasOwnProperty(i)){t[i]=e[i]}}};var s=t.SpringSystem=function v(t){this._springRegistry={};this._activeSprings=[];this.listeners=[];this._idleSpringIndices=[];this.looper=t||new h;this.looper.springSystem=this};e.extend(s.prototype,{_springRegistry:null,_isIdle:true,_lastTimeMillis:-1,_activeSprings:null,listeners:null,_idleSpringIndices:null,setLooper:function S(t){this.looper=t;t.springSystem=this},createSpring:function m(t,e){var i;if(t===undefined||e===undefined){i=a.DEFAULT_ORIGAMI_SPRING_CONFIG}else{i=a.fromOrigamiTensionAndFriction(t,e)}return this.createSpringWithConfig(i)},createSpringWithBouncinessAndSpeed:function y(t,e){var i;if(t===undefined||e===undefined){i=a.DEFAULT_ORIGAMI_SPRING_CONFIG}else{i=a.fromBouncinessAndSpeed(t,e)}return this.createSpringWithConfig(i)},createSpringWithConfig:function C(t){var e=new r(this);this.registerSpring(e);e.setSpringConfig(t);return e},getIsIdle:function R(){return this._isIdle},getSpringById:function E(t){return this._springRegistry[t]},getAllSprings:function T(){var t=[];for(var e in this._springRegistry){if(this._springRegistry.hasOwnProperty(e)){t.push(this._springRegistry[e])}}return t},registerSpring:function w(t){this._springRegistry[t.getId()]=t},deregisterSpring:function I(t){_(this._activeSprings,t);delete this._springRegistry[t.getId()]},advance:function A(t,e){while(this._idleSpringIndices.length>0){this._idleSpringIndices.pop()}for(var i=0,n=this._activeSprings.length;i<n;i++){var s=this._activeSprings[i];if(s.systemShouldAdvance()){s.advance(t/1e3,e/1e3)}else{this._idleSpringIndices.push(this._activeSprings.indexOf(s))}}while(this._idleSpringIndices.length>0){var r=this._idleSpringIndices.pop();r>=0&&this._activeSprings.splice(r,1)}},loop:function b(t){var e;if(this._lastTimeMillis===-1){this._lastTimeMillis=t-1}var i=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,s=this.listeners.length;for(n=0;n<s;n++){e=this.listeners[n];e.onBeforeIntegrate&&e.onBeforeIntegrate(this)}this.advance(t,i);if(this._activeSprings.length===0){this._isIdle=true;this._lastTimeMillis=-1}for(n=0;n<s;n++){e=this.listeners[n];e.onAfterIntegrate&&e.onAfterIntegrate(this)}if(!this._isIdle){this.looper.run()}},activateSpring:function V(t){var e=this._springRegistry[t];if(this._activeSprings.indexOf(e)==-1){this._activeSprings.push(e)}if(this.getIsIdle()){this._isIdle=false;this.looper.run()}},addListener:function M(t){this.listeners.push(t)},removeListener:function F(t){_(this.listeners,t)},removeAllListeners:function O(){this.listeners=[]}});var r=t.Spring=function P(t){this._id="s"+P._ID++;this._springSystem=t;this.listeners=[];this._currentState=new o;this._previousState=new o;this._tempState=new o};e.extend(r,{_ID:0,MAX_DELTA_TIME_SEC:.064,SOLVER_TIMESTEP_SEC:.001});e.extend(r.prototype,{_id:0,_springConfig:null,_overshootClampingEnabled:false,_currentState:null,_previousState:null,_tempState:null,_startValue:0,_endValue:0,_wasAtRest:true,_restSpeedThreshold:.001,_displacementFromRestThreshold:.001,listeners:null,_timeAccumulator:0,_springSystem:null,destroy:function x(){this.listeners=[];this.frames=[];this._springSystem.deregisterSpring(this)},getId:function L(){return this._id},setSpringConfig:function k(t){this._springConfig=t;return this},getSpringConfig:function D(){return this._springConfig},setCurrentValue:function B(t,e){this._startValue=t;this._currentState.position=t;if(!e){this.setAtRest()}this.notifyPositionUpdated(false,false);return this},getStartValue:function G(){return this._startValue},getCurrentValue:function U(){return this._currentState.position},getCurrentDisplacementDistance:function H(){return this.getDisplacementDistanceForState(this._currentState)},getDisplacementDistanceForState:function N(t){return Math.abs(this._endValue-t.position)},setEndValue:function W(t){if(this._endValue==t&&this.isAtRest()){return this}this._startValue=this.getCurrentValue();this._endValue=t;this._springSystem.activateSpring(this.getId());for(var e=0,i=this.listeners.length;e<i;e++){var n=this.listeners[e];var s=n.onSpringEndStateChange;s&&s(this)}return this},getEndValue:function q(){return this._endValue},setVelocity:function X(t){if(t===this._currentState.velocity){return this}this._currentState.velocity=t;this._springSystem.activateSpring(this.getId());return this},getVelocity:function j(){return this._currentState.velocity},setRestSpeedThreshold:function z(t){this._restSpeedThreshold=t;return this},getRestSpeedThreshold:function Y(){return this._restSpeedThreshold},setRestDisplacementThreshold:function J(t){this._displacementFromRestThreshold=t},getRestDisplacementThreshold:function K(){return this._displacementFromRestThreshold},setOvershootClampingEnabled:function Q(t){this._overshootClampingEnabled=t;return this},isOvershootClampingEnabled:function Z(){return this._overshootClampingEnabled},isOvershooting:function $(){var t=this._startValue;var e=this._endValue;return this._springConfig.tension>0&&(t<e&&this.getCurrentValue()>e||t>e&&this.getCurrentValue()<e)},advance:function tt(t,e){var i=this.isAtRest();if(i&&this._wasAtRest){return}var n=e;if(e>r.MAX_DELTA_TIME_SEC){n=r.MAX_DELTA_TIME_SEC}this._timeAccumulator+=n;var s=this._springConfig.tension,o=this._springConfig.friction,a=this._currentState.position,h=this._currentState.velocity,u=this._tempState.position,l=this._tempState.velocity,c,p,_,f,d,g,v,S,m,y;while(this._timeAccumulator>=r.SOLVER_TIMESTEP_SEC){this._timeAccumulator-=r.SOLVER_TIMESTEP_SEC;if(this._timeAccumulator<r.SOLVER_TIMESTEP_SEC){this._previousState.position=a;this._previousState.velocity=h}c=h;p=s*(this._endValue-u)-o*h;u=a+c*r.SOLVER_TIMESTEP_SEC*.5;l=h+p*r.SOLVER_TIMESTEP_SEC*.5;_=l;f=s*(this._endValue-u)-o*l;u=a+_*r.SOLVER_TIMESTEP_SEC*.5;l=h+f*r.SOLVER_TIMESTEP_SEC*.5;d=l;g=s*(this._endValue-u)-o*l;u=a+d*r.SOLVER_TIMESTEP_SEC*.5;l=h+g*r.SOLVER_TIMESTEP_SEC*.5;v=l;S=s*(this._endValue-u)-o*l;m=1/6*(c+2*(_+d)+v);y=1/6*(p+2*(f+g)+S);a+=m*r.SOLVER_TIMESTEP_SEC;h+=y*r.SOLVER_TIMESTEP_SEC}this._tempState.position=u;this._tempState.velocity=l;this._currentState.position=a;this._currentState.velocity=h;if(this._timeAccumulator>0){this._interpolate(this._timeAccumulator/r.SOLVER_TIMESTEP_SEC)}if(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting()){if(this._springConfig.tension>0){this._startValue=this._endValue;this._currentState.position=this._endValue}else{this._endValue=this._currentState.position;this._startValue=this._endValue}this.setVelocity(0);i=true}var C=false;if(this._wasAtRest){this._wasAtRest=false;C=true}var R=false;if(i){this._wasAtRest=true;R=true}this.notifyPositionUpdated(C,R)},notifyPositionUpdated:function et(t,e){for(var i=0,n=this.listeners.length;i<n;i++){var s=this.listeners[i];if(t&&s.onSpringActivate){s.onSpringActivate(this)}if(s.onSpringUpdate){s.onSpringUpdate(this)}if(e&&s.onSpringAtRest){s.onSpringAtRest(this)}}},systemShouldAdvance:function it(){return!this.isAtRest()||!this.wasAtRest()},wasAtRest:function nt(){return this._wasAtRest},isAtRest:function st(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||this._springConfig.tension===0)},setAtRest:function rt(){this._endValue=this._currentState.position;this._tempState.position=this._currentState.position;this._currentState.velocity=0;return this},_interpolate:function ot(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t);this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},getListeners:function at(){return this.listeners},addListener:function ht(t){this.listeners.push(t);return this},removeListener:function ut(t){_(this.listeners,t);return this},removeAllListeners:function lt(){this.listeners=[];return this},currentValueIsApproximately:function ct(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()}});var o=function pt(){};e.extend(o.prototype,{position:0,velocity:0});var a=t.SpringConfig=function _t(t,e){this.tension=t;this.friction=e};var h=t.AnimationLooper=function ft(){this.springSystem=null;var t=this;var i=function n(){t.springSystem.loop(Date.now())};this.run=function(){e.onFrame(i)}};t.SimulationLooper=function dt(t){this.springSystem=null;var e=0;var i=false;t=t||16.667;this.run=function(){if(i){return}i=true;while(!this.springSystem.getIsIdle()){this.springSystem.loop(e+=t)}i=false}};t.SteppingSimulationLooper=function(t){this.springSystem=null;var e=0;this.run=function(){};this.step=function(t){this.springSystem.loop(e+=t)}};var u=t.OrigamiValueConverter={tensionFromOrigamiValue:function gt(t){return(t-30)*3.62+194},origamiValueFromTension:function vt(t){return(t-194)/3.62+30},frictionFromOrigamiValue:function St(t){return(t-8)*3+25},origamiFromFriction:function mt(t){return(t-25)/3+8}};var l=t.BouncyConversion=function(t,e){this.bounciness=t;this.speed=e;var i=this.normalize(t/1.7,0,20);i=this.projectNormal(i,0,.8);var n=this.normalize(e/1.7,0,20);this.bouncyTension=this.projectNormal(n,.5,200);this.bouncyFriction=this.quadraticOutInterpolation(i,this.b3Nobounce(this.bouncyTension),.01)};e.extend(l.prototype,{normalize:function yt(t,e,i){return(t-e)/(i-e)},projectNormal:function Ct(t,e,i){return e+t*(i-e)},linearInterpolation:function Rt(t,e,i){return t*i+(1-t)*e},quadraticOutInterpolation:function Et(t,e,i){return this.linearInterpolation(2*t-t*t,e,i)},b3Friction1:function Tt(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},b3Friction2:function wt(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},b3Friction3:function It(t){return 4.5e-7*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},b3Nobounce:function At(t){var e=0;if(t<=18){e=this.b3Friction1(t)}else if(t>18&&t<=44){e=this.b3Friction2(t)}else{e=this.b3Friction3(t)}return e}});e.extend(a,{fromOrigamiTensionAndFriction:function bt(t,e){return new a(u.tensionFromOrigamiValue(t),u.frictionFromOrigamiValue(e))},fromBouncinessAndSpeed:function Vt(e,i){var n=new t.BouncyConversion(e,i);return this.fromOrigamiTensionAndFriction(n.bouncyTension,n.bouncyFriction)},coastingConfigWithOrigamiFriction:function Mt(t){return new a(0,u.frictionFromOrigamiValue(t))}});a.DEFAULT_ORIGAMI_SPRING_CONFIG=a.fromOrigamiTensionAndFriction(40,7);e.extend(a.prototype,{friction:0,tension:0});var c={};e.hexToRGB=function(t){if(c[t]){return c[t]}t=t.replace("#","");if(t.length===3){t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}var e=t.match(/.{2}/g);var i={r:parseInt(e[0],16),g:parseInt(e[1],16),b:parseInt(e[2],16)};c[t]=i;return i};e.rgbToHex=function(t,e,i){t=t.toString(16);e=e.toString(16);i=i.toString(16);t=t.length<2?"0"+t:t;e=e.length<2?"0"+e:e;i=i.length<2?"0"+i:i;return"#"+t+e+i};var p=t.MathUtil={mapValueInRange:function Ft(t,e,i,n,s){var r=i-e;var o=s-n;var a=(t-e)/r;return n+a*o},interpolateColor:function Ot(t,i,n,s,r,o){s=s===undefined?0:s;r=r===undefined?1:r;i=e.hexToRGB(i);n=e.hexToRGB(n);var a=Math.floor(e.mapValueInRange(t,s,r,i.r,n.r));var h=Math.floor(e.mapValueInRange(t,s,r,i.g,n.g));var u=Math.floor(e.mapValueInRange(t,s,r,i.b,n.b));if(o){return"rgb("+a+","+h+","+u+")"}else{return e.rgbToHex(a,h,u)}},degreesToRadians:function Pt(t){return t*Math.PI/180},radiansToDegrees:function xt(t){return t*180/Math.PI}};e.extend(e,p);function _(t,e){var i=t.indexOf(e);i!=-1&&t.splice(i,1)}var f;if(typeof window!=="undefined"){f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}if(!f&&typeof process!=="undefined"&&process.title==="node"){f=setImmediate}e.onFrame=function Lt(t){return f(t)};if(typeof exports!="undefined"){e.extend(exports,t)}else if(typeof window!="undefined"){window.rebound=t}})();"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(e,i,n){if(i)t(e.prototype,i);if(n)t(e,n);return e}}();function _classCallCheck(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var Polygon=function(){function t(){var e=arguments.length<=0||arguments[0]===undefined?100:arguments[0];var i=arguments.length<=1||arguments[1]===undefined?3:arguments[1];var n=arguments.length<=2||arguments[2]===undefined?0:arguments[2];var s=arguments[3];_classCallCheck(this,t);this._radius=e;this._sides=i;this._depth=n;this._colors=s;this._x=0;this._y=0;this.rotation=0;this.scale=1;this.points=this._getRegularPolygonPoints()}_createClass(t,[{key:"_getRegularPolygonPoints",value:function e(){var t=[];var e=0;while(e<this._sides){var i=-this._radius*Math.sin(e*2*Math.PI/this._sides);var n=this._radius*Math.cos(e*2*Math.PI/this._sides);t.push({x:i,y:n});e++}return t}},{key:"_getInscribedPoints",value:function i(t,e){var i=this;var n=[];t.forEach(function(s,r){var o=s;var a=t[r+1];if(!a){a=t[0]}var h=i._getInterpolatedPoint(o,a,e);n.push(h)});return n}},{key:"_getInterpolatedPoint",value:function n(t,e,i){var n=t.x;var s=t.y;var r=e.x;var o=e.y;var a=n+(r-n)*i;var h=s+(o-s)*i;return{x:a,y:h}}},{key:"_getUpdatedChildren",value:function s(t){var e=[];for(var i=0;i<this._depth;i++){var n=e[i-1]||this.points;var s=this._getInscribedPoints(n,t);e.push(s)}return e}},{key:"renderChildren",value:function r(t,e){var i=this;var n=this._getUpdatedChildren(e);n.forEach(function(e,s){t.beginPath();e.forEach(function(e){return t.lineTo(e.x,e.y)});t.closePath();var r=i._colors.stroke;var o=i._colors.child;if(r){t.strokeStyle=r;t.stroke()}if(o){var a=rebound.util.hexToRGB(o);var h=1/n.length;var u=h+h*s;var l="rgba("+a.r+", "+a.g+", "+a.b+", "+u+")";t.fillStyle=l;t.shadowColor="rgba(0,0,0, 0.1)";t.shadowBlur=10;t.shadowOffsetX=0;t.shadowOffsetY=0;t.fill()}})}},{key:"render",value:function o(t){t.save();t.translate(this._x,this._y);if(this.rotation!==0){t.rotate(rebound.MathUtil.degreesToRadians(this.rotation))}if(this.scale!==1){t.scale(this.scale,this.scale)}t.beginPath();this.points.forEach(function(e){return t.lineTo(e.x,e.y)});t.closePath();var e=this._colors.stroke;var i=this._colors.base;if(e){t.strokeStyle=e;t.stroke()}if(i){t.fillStyle=i;t.fill()}t.restore()}}]);return t}();"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(e,i,n){if(i)t(e.prototype,i);if(n)t(e,n);return e}}();function _classCallCheck(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var Spinner=function(){function t(e){_classCallCheck(this,t);var i=e.id,n=e.radius,s=e.sides,r=e.depth,o=e.colors,a=e.alwaysForward,h=e.restAt,u=e.renderBase;if(s<3){console.warn("At least 3 sides required.");s=3}this._canvas=document.createElement("canvas");this._canvas.style.zIndex=99999;this._canvas.style.backgroundColor=o.background;this._canvasW=null;this._canvasH=null;this._canvasOpacity=1;this._centerX=null;this._centerY=null;this._alwaysForward=a;this._restThreshold=h;this._renderBase=u;this._springRangeLow=0;this._springRangeHigh=this._restThreshold||1;this._basePolygon=new Polygon(n,s,r,o);this._progress=0;this._isAutoSpin=null;this._isCompleting=null}_createClass(t,[{key:"init",value:function e(t,i){this._addCanvas();this._spring=t;this._addSpringListener();this._isAutoSpin=i;if(i){this._spin()}else{this._spring.setEndValue(0);this.render()}}},{key:"_addCanvas",value:function i(){document.body.appendChild(this._canvas);this._context=this._canvas.getContext("2d");this._setCanvasSize()}},{key:"_setCanvasSize",value:function n(){this._canvasW=this._canvas.width=window.innerWidth;this._canvasH=this._canvas.height=window.innerHeight;this._canvas.style.position="fixed";this._canvas.style.top=0;this._canvas.style.left=0;this._centerX=this._canvasW/2;this._centerY=this._canvasH/2}},{key:"_addSpringListener",value:function s(){var t=this;this._spring.addListener({onSpringUpdate:function e(i){var n=i.getCurrentValue();var s=0,r=1,o=t._springRangeLow,a=t._springRangeHigh;n=rebound.MathUtil.mapValueInRange(n,s,r,o,a);t.render(n)}})}},{key:"setComplete",value:function r(){this._isCompleting=true}},{key:"_completeAnimation",value:function o(){this._canvasOpacity-=.1;this._canvas.style.opacity=this._canvasOpacity;if(this._canvasOpacity<=0){this._isAutoSpin=false;this._spring.setAtRest();this._canvas.remove()}}},{key:"_spin",value:function a(){if(this._alwaysForward){var t=this._spring.getCurrentValue();if(this._restThreshold&&t===1){this._switchSpringRange()}if(t===1){this._spring.setCurrentValue(0).setAtRest()}}this._spring.setEndValue(this._spring.getCurrentValue()===1?0:1)}},{key:"_switchSpringRange",value:function h(){var t=this._restThreshold;this._springRangeLow=this._springRangeLow===t?0:t;this._springRangeHigh=this._springRangeHigh===t?1:t}},{key:"render",value:function u(t){if(t){this._progress=Math.round(t*1e4)/1e4}if(this._isAutoSpin&&this._spring.isAtRest()){this._spin()}if(this._isCompleting){this._completeAnimation()}this._context.clearRect(0,0,this._canvasW,this._canvasH);this._context.save();this._context.translate(this._centerX,this._centerY);this._context.lineWidth=1.5;if(this._renderBase){this._basePolygon.render(this._context)}this._basePolygon.renderChildren(this._context,this._progress);this._context.restore()}}]);return t}();"use strict";var settings=SETTINGS||{rebound:{tension:2,friction:5},spinner:{radius:80,sides:3,depth:4,colors:{background:"#000000",stroke:"#000000",base:"#222222",child:"#FFFFFF"},alwaysForward:true,restAt:.5,renderBase:true}};var demo={settings:settings,spring:null,spinner:null,initRebound:function t(){var t=demo.settings.rebound;var e=new rebound.SpringSystem;demo.spring=e.createSpring(t.tension,t.friction)},initSpinner:function e(){var t=demo.settings.spinner;demo.spinner=new Spinner(t)},init:function i(){var t=true;demo.initRebound();demo.initSpinner();demo.spinner.init(demo.spring,t);if(t){setTimeout(function(){demo.spinner.setComplete()},1e3)}else{demo.loadSomething()}},loadSomething:function n(){var t=new XMLHttpRequest;t.addEventListener("progress",function(t){if(t.lengthComputable){var e=Math.ceil(t.loaded/t.total*100);console.log("ajax loding percent",e);demo.spring.setEndValue(e*.01)}});t.addEventListener("load",function(t){demo.spinner.setComplete()});t.open("GET","/img/something.jpg");t.send()}};
//rebuild by neat 